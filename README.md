### 株価予測プロジェクト
このプロジェクトは、stock_price.csv ファイルに含まれる株価データを使用して、ProphetおよびLightGBMモデルによる株価予測を行うPythonスクリプトです。このスクリプトは、ローリング予測ウィンドウを使用してモデルを訓練し、評価します。予測結果はグラフで可視化され、モデルの評価指標（RMSE）も表示されます。

### 特徴
- データ読み込みと前処理: CSVファイルから株価データを読み込み、日付列をdatetimeオブジェクトに変換し、出来高と変化率の列を数値形式にパースします。

- データ分割: データを訓練セットとテストセットに分割します。

- ローリング予測: 指定された訓練ウィンドウと予測ウィンドウを使用して、ProphetとLightGBMモデルのローリング予測を実行します。

- Prophetモデル: Facebookが開発したProphetライブラリを使用して、季節性のある時系列データを予測します。

- LightGBMモデル: 高速で高性能な勾配ブースティングフレームワークであるLightGBMを使用して予測を行います。

- 結果の可視化: 実際の株価と各モデルによる予測値をグラフで比較し、予測の精度を視覚的に確認できます。

- モデル評価: RMSE (Root Mean Squared Error) を用いて各モデルの性能を評価し、棒グラフで比較します。

- Google Drive連携: Google Colab環境での使用を想定し、Google Driveからのデータ読み込みに対応しています。

セットアップ
必要なライブラリ
このプロジェクトを実行するには、以下のPythonライブラリが必要です。

pip install pandas numpy matplotlib scikit-learn prophet lightgbm japanize-matplotlib

データの準備
プロジェクトのルートディレクトリに stock_price.csv という名前のCSVファイルを配置してください。このファイルは、以下の列を含む必要があります。

日付け: 株価の日付 (例: YYYY-MM-DD 形式)

終値: 終値

始値: 始値

高値: 高値

安値: 安値

出来高: 出来高 (例: 123.45M, 67.89K のようなサフィックスを含む場合あり)

変化率 %: 変化率（パーセンテージ）

CSVファイルの例:

日付け,終値,始値,高値,安値,出来高,変化率 %
2024-08-01,156.3,159.3,159.4,156.1,79.15M,-2.56%
2024-07-31,160.4,158.2,160.7,158.1,173.91M,1.07%
...

Google Colabでの使用
Google Colabで実行する場合、以下のコードでGoogle Driveをマウントし、stock_price.csv ファイルへのパスを適切に設定してください。

from google.colab import drive
drive.mount('/content/drive')
# df = pd.read_csv("/content/drive/MyDrive/Athena/stock_price.csv")
```main.py` ファイル内の`df = pd.read_csv("/content/drive/MyDrive/Athena/stock_price.csv")`の行が、Google Drive上のファイルのパスと一致していることを確認してください。

## 実行方法

`main.py` スクリプトを直接実行します。

```bash
python main.py

スクリプトは以下の処理を実行します。

stock_price.csv からデータを読み込み、前処理を行います。

訓練データとテストデータを分割します。

ProphetモデルとLightGBMモデルを使用して、ローリング予測を実行します。

評価期間における実績値と各モデルの予測値を比較する折れ線グラフを表示します。

各モデルのRMSE値を比較する棒グラフを表示します。

各モデルのRMSE値をコンソールに出力します。

設定
main.py ファイル内の以下の変数を変更することで、モデルの動作を調整できます。

train_window_years: ローリング予測の訓練ウィンドウの期間（年）。

predict_window_weeks: ローリング予測の予測ウィンドウの期間（週）。

結果
スクリプトの実行後、以下の2つのプロットが生成されます。

株価予測結果比較 (評価期間): 実績値 vs. 各モデルによる予測値:
この折れ線グラフは、評価期間における実際の株価と、ProphetおよびLightGBMモデルによる予測値を比較します。これにより、各モデルが株価のトレンドと変動をどの程度正確に捉えているかを視覚的に確認できます。

RMSE値比較:
この棒グラフは、ProphetとLightGBMモデルのRMSE値を比較します。RMSEは予測誤差の一般的な指標であり、値が小さいほどモデルの予測精度が高いことを示します。このグラフにより、どのモデルがより優れた予測性能を持っているかを簡単に比較できます。

また、コンソールには各モデルのRMSE値が数値で出力されます。これらの結果を通じて、各モデルの性能と、株価予測における異なるアプローチの有効性を評価することができます。